## 17. 网络编程 (Networking)

### 17.1. TCP/IP 基础 (TCP/IP Basics)

- **知识点：** `Socket` 编程；TCP (传输控制协议)；UDP (用户数据报协议)；客户端-服务器模型；端口号。

1. **题目名称：** 简单的 TCP 服务器与客户端通信 **题目描述：**

   - **服务器端：** 编写一个 Java 程序作为 TCP 服务器。它监听特定端口（例如 8080），接收客户端连接后，读取客户端发送的一行消息，然后将这条消息原样返回给客户端，并关闭连接。
   - **客户端：** 编写一个 Java 程序作为 TCP 客户端。它连接到服务器的特定端口，向服务器发送一行消息（例如 "Hello Server!"），然后读取服务器返回的消息并打印到控制台，最后关闭连接。 **参考代码结构：**

   **`EchoServer.java`**

   ```java
   import java.io.*;
   import java.net.ServerSocket;
   import java.net.Socket;
   
   public class EchoServer {
       private static final int PORT = 8080;
   
       public static void main(String[] args) {
           try (ServerSocket serverSocket = new ServerSocket(PORT)) {
               System.out.println("Server started on port " + PORT + ". Waiting for clients...");
               while (true) { // 持续监听
                   Socket clientSocket = serverSocket.accept();
                   System.out.println("Client connected: " + clientSocket.getInetAddress());
   
                   try (BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
                        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true)) {
                       String clientMessage = in.readLine();
                       if (clientMessage != null) {
                           System.out.println("Received from client: " + clientMessage);
                           out.println("Echo: " + clientMessage); // 发送回客户端
                       }
                   } finally {
                       clientSocket.close();
                       System.out.println("Client disconnected.");
                   }
               }
           } catch (IOException e) {
               e.printStackTrace();
           }
       }
   }
   ```

   **`EchoClient.java`**

   ```java
   import java.io.*;
   import java.net.Socket;
   import java.util.Scanner;
   
   public class EchoClient {
       private static final String SERVER_IP = "127.0.0.1"; // 服务器IP地址
       private static final int PORT = 8080;
   
       public static void main(String[] args) {
           try (Socket socket = new Socket(SERVER_IP, PORT);
                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
                Scanner scanner = new Scanner(System.in)) {
   
               System.out.print("Enter message to send to server: ");
               String messageToSend = scanner.nextLine();
               out.println(messageToSend); // 发送消息到服务器
   
               String serverResponse = in.readLine(); // 读取服务器响应
               System.out.println("Server says: " + serverResponse);
   
           } catch (IOException e) {
               e.printStackTrace();
           }
       }
   }
   ```
