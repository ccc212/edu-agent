## 15. 设计模式 (Design Patterns)

### 15.1. 单例模式 (Singleton Pattern)

- **知识点：** 单例模式的目的（确保一个类只有一个实例，并提供一个全局访问点）；懒汉式与饿汉式；线程安全；双重检查锁定（DCL）；静态内部类；枚举实现单例。

1. 题目名称：

    实现线程安全的懒汉式单例

   题目描述：

   - 定义一个 `Logger` 类，使用懒汉式单例模式实现，并确保它是线程安全的（使用双重检查锁定或静态内部类方式）。
   - `Logger` 类应包含一个 `log(String message)` 方法，用于打印日志信息。
   - 在 `main` 方法中，通过多个线程同时尝试获取 `Logger` 实例，并调用 `log()` 方法，验证所有线程获取的是同一个实例。 **参考代码结构：**

   Java

   ```
   // Logger.java
   class Logger {
       private static volatile Logger instance; // 注意 volatile 关键字
   
       private Logger() {
           // 私有构造器，防止外部实例化
       }
   
       public static Logger getInstance() {
           // 在这里编写线程安全的懒汉式单例实现 (双重检查锁定)
           return instance;
       }
   
       public void log(String message) {
           System.out.println("[Log] " + message);
       }
   }
   
   // Main.java
   public class SingletonDemo {
       public static void main(String[] args) {
           // 创建多个线程同时获取单例并使用
           for (int i = 0; i < 5; i++) {
               new Thread(() -> {
                   Logger logger = Logger.getInstance();
                   logger.log("Thread " + Thread.currentThread().getName() + " accessed logger.");
               }).start();
           }
       }
   }
   ```

### 15.2. 工厂模式 (Factory Pattern)

- **知识点：** 简单工厂模式；工厂方法模式；抽象工厂模式；解耦客户端与具体产品。

1. 题目名称：

    简单图形工厂

   题目描述：

   - 定义一个 `Shape` 接口，包含一个 `draw()` 方法。
   - 创建 `Circle` 和 `Rectangle` 类，实现 `Shape` 接口。
   - 定义一个 `ShapeFactory` 类，包含一个静态方法 `createShape(String type)`，根据传入的类型字符串（"circle" 或 "rectangle"）返回对应的 `Shape` 实例。
   - 在 `main` 方法中，通过 `ShapeFactory` 创建不同类型的 `Shape` 对象，并调用它们的 `draw()` 方法。 **参考代码结构：**

​    // Shape.java interface Shape { void draw(); }



````
// Circle.java
class Circle implements Shape {
    @Override
    public void draw() {
        System.out.println("Drawing Circle");
    }
}

// Rectangle.java
class Rectangle implements Shape {
    @Override
    public void draw() {
        System.out.println("Drawing Rectangle");
    }
}

// ShapeFactory.java
class ShapeFactory {
    public static Shape createShape(String type) {
        // 在这里编写工厂方法逻辑
        return null;
    }
}

// Main.java
public class SimpleFactoryDemo {
    public static void main(String[] args) {
        Shape circle = ShapeFactory.createShape("circle");
        if (circle != null) {
            circle.draw();
        }

        Shape rectangle = ShapeFactory.createShape("rectangle");
        if (rectangle != null) {
            rectangle.draw();
        }

        Shape unknown = ShapeFactory.createShape("triangle");
        if (unknown == null) {
            System.out.println("Unknown shape type.");
        }
    }
}
```
````